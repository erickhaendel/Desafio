"use strict";angular.module("desafioApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-loading-bar"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"self"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/shot/:id",{templateUrl:"views/shot.html",controller:"ShotCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}]),function(){function a(a,b){var c={access_token:"c8fec4330a56c65cfcbf63a278037dd27eae8a7b512a27bcad7bf98beeb19cf2",token_type:"bearer",url:"https://api.dribbble.com/v1/shots/"};return c.getPopularShots=function(d){var e=b.defer();return a.get(c.url,{params:{page:d,sort:"views",access_token:c.access_token,token_type:c.token_type}}).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise},c.getShot=function(d){var e=b.defer();return a.get(c.url+d,{params:{access_token:c.access_token,token_type:c.token_type}}).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise},c}angular.module("desafioApp").factory("dribbbleService",a),a.$inject=["$http","$q"]}(),function(){function a(){return{link:function(a,b,c){setTimeout(function(){$(window).on("scroll",function(){$(window).scrollTop()+$(window).height()>=$(b).height()&&a.$apply(c.infiniteScroll)})},1e3)}}}angular.module("desafioApp").directive("infiniteScroll",a)}(),function(){function a(){return{restrict:"A",link:function(a,b,c){var d=c.text?c.text:"",e=c.length?c.length:30;d.length>e&&(d=String(d).replace(/<[^>]+>/gm,"").substring(0,e)+"..."),b.empty().append(d)}}}angular.module("desafioApp").directive("ngFormatText",a)}(),function(){function a(){return{restrict:"A",link:function(a,b,c){a.$watch(c.ngBodyFixed,function(a,b){a?$("body").addClass("no-scroll"):$("body").removeClass("no-scroll")})}}}angular.module("desafioApp").directive("ngBodyFixed",a)}(),function(){function a(a,b){function c(){b.getPopularShots(d.page).then(function(a){d.shots=d.shots.concat(a.data)},function(){d.shots=[]})}var d=this;d.shots=[],d.shot={},d.modal={show:!1},d.page=1,d.loadMore=function(){d.page++,c()},d.openShot=function(a){d.shot={},b.getShot(a).then(function(a){d.shot=a.data,d.modal.show=!0},function(){d.modal.show=!1})},d.closeModal=function(){d.modal.show=!1},c()}a.$inject=["$scope","dribbbleService"],angular.module("desafioApp").controller("MainCtrl",a)}(),function(){function a(a,b){function c(){b.getShot(a.id).then(d,e)}function d(a){f.shots=f.shots.concat(a.data)}function e(){f.shots=[]}var f=this;f.shots=[],f.shot={},f.page=1,c()}angular.module("desafioApp").controller("ShotCtrl",a),a.$inject=["$routeParams","dribbbleService"]}(),angular.module("desafioApp").run(["$templateCache",function(a){a.put("views/main.html",'<section class="container-box" infinite-scroll="self.loadMore()"> <div class="box shot-list" ng-repeat="shot in self.shots"> <div class="shot-item" data-ng-click="self.openShot(shot.id)"> <header class="shot-header"> <div class="shot-header-image"> <img data-ng-src="{{shot.images.normal}}" alt=""> </div> <h2 class="shot-header-title" data-ng-format-text data-text="{{shot.title}}" data-length="23"></h2> </header> <section class="shot-body"> <div data-ng-format-text data-text="{{shot.description}}" data-length="20"></div> </section> <footer class="shot-footer"> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-eye"></i> {{shot.views_count}}</a> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-comments"></i> {{shot.comments_count}} </a> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-heart"></i> {{shot.likes_count}} </a> </footer> </div> </div> </section> <!-- Box do Modal --> <section class="modal" data-ng-show="self.modal.show" ng-body-fixed="self.modal.show"> <!-- Fundo, overlay --> <div class="modal-overlay" data-ng-click="self.closeModal()"></div> <!-- Modal --> <div class="modal-content" data-ng-click="self.nothing()"> <!-- cabeçalho --> <header class="modal-header"> <div class="profile-info"> <picture class="image"> <img data-ng-src="{{self.shot.user.avatar_url}}" alt="Usuário Foto de Perfil"> </picture> <h2 class="title-primary">{{self.shot.title}}</h2> <span class="title-sub">de {{self.shot.user.name}} para {{self.shot.team.name}}</span> <div class="interactive"> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-eye"></i> {{self.shot.views_count}}</a> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-comments"></i> {{self.shot.comments_count}} </a> <a href="javascript:void(0)" class="interact-count"> <i class="fas fa-heart"></i> {{self.shot.likes_count}} </a> </div> </div> </header> <!-- Conteudo do modal --> <section class="modal-body"> <div class="box-detail-shot"> <img data-ng-src="{{self.shot.images.normal}}" alt="" class="image-shot"> <div class="text-shot" ng-bind-html="self.shot.description"></div> <div class="tags-shot"> <h3 class="title">Tags</h3> <span class="tag" data-ng-repeat="tag in self.shot.tags">{{tag}}</span> </div> </div> </section> </div> <!-- Fechar modal --> <a href="javascript:void(0)" class="modal-close" data-ng-click="self.closeModal()"> <i class="fas fa-times"></i>  </a></section>'),a.put("views/shot.html",'<section class="container-box" infinite-scroll="self.loadMore()"> </section>')}]);